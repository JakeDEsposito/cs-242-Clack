By Jake D'Esposito

I would fix negative port values by throwing an error.
I would fix null user value by putting anonymous for the username.